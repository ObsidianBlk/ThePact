extends Area2D



# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------
signal triggered()

# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------
@export_category("Tigger")
@export var trigger_once : bool = true
@export var trigger_group : StringName = &""


# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------
var _untriggered : bool = true

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------
func _ready() -> void:
	body_entered.connect(_on_body_entered)

# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------
func reset() -> void:
	_untriggered = true

# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------
func _on_body_entered(body : Node2D) -> void:
	if not _untriggered and trigger_once:
		return
	
	if trigger_group != &"":
		if body.is_in_group(trigger_group):
			triggered.emit()

